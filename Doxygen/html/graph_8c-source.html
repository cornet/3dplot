<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>3dplot: graph.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>graph.c</h1><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment">    graph.c</span>
00003 <span class="comment">    Functions to plot static graphs</span>
00004 <span class="comment"> */</span>
00005 
00006 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00007 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00008 
00009 <span class="preprocessor">#if defined(__APPLE__) &amp;&amp; (__MACH__)</span>
00010 <span class="preprocessor"></span><span class="preprocessor">#include &lt;GLUT/glut.h&gt;</span>
00011 <span class="preprocessor">#else</span>
00012 <span class="preprocessor"></span><span class="preprocessor">#include &lt;GL/glut.h&gt;</span>
00013 <span class="preprocessor">#endif</span>
00014 <span class="preprocessor"></span>
00015 <span class="preprocessor">#include "<a class="code" href="graph_8h.html">graph.h</a>"</span>
00016 
00017 <span class="keywordtype">void</span> defineMaterial(<span class="keywordtype">void</span>)
00018 {
00019     GLfloat specular[] = {0.5, 0.5, 0.5, 0.5};
00020     GLfloat shininess[] = {50.0};
00021 
00022      <span class="comment">//glColor3f(1.0, 0.0, 0.0);</span>
00023 
00024     glMaterialfv(GL_FRONT, GL_SPECULAR, specular);
00025     glMaterialfv(GL_FRONT, GL_SHININESS, shininess);
00026 }
00027 
00028 <span class="keywordtype">float</span> redMap(<span class="keywordtype">float</span> height) 
00029 {
00030     <span class="keyword">extern</span> <span class="keywordtype">float</span> GradientDetails[6];
00031     <span class="comment">/* Scale up so 0 &lt;- height &lt;= 2 */</span>
00032     height = height + 1;
00033     <span class="keywordflow">return</span> GradientDetails[0] + (height * (GradientDetails[3] - GradientDetails[0])/2);
00034 }
00035 
00036 <span class="keywordtype">float</span> greenMap(<span class="keywordtype">float</span> height)    
00037 {
00038     <span class="keyword">extern</span> <span class="keywordtype">float</span> GradientDetails[6];
00039     height = height + 1;
00040     <span class="keywordflow">return</span> GradientDetails[1] + (height * (GradientDetails[4] - GradientDetails[1])/2);
00041 }
00042 
00043 <span class="keywordtype">float</span> blueMap(<span class="keywordtype">float</span> height) 
00044 {
00045     <span class="keyword">extern</span> <span class="keywordtype">float</span> GradientDetails[6];
00046     height = height + 1;
00047     <span class="keywordflow">return</span> GradientDetails[2] + (height * (GradientDetails[5] - GradientDetails[2])/2);
00048 }
00049 
00050 <span class="keywordtype">void</span> plotGraph(<span class="keyword">struct</span> <a class="code" href="structdataset.html">dataset</a> *ds)
00051 {
00052     <span class="keywordtype">int</span> is,it; <span class="comment">/* Counters for s and t coords */</span>
00053     <span class="keywordtype">double</span> x,y,z;   <span class="comment">/* To hold current point to plot */</span>
00054      <span class="keyword">extern</span> <span class="keywordtype">int</span> COLOUR;
00055      <span class="keyword">extern</span> <span class="keywordtype">int</span> USE_GRADIENT_FILL;
00056      <span class="keyword">extern</span> <span class="keywordtype">int</span> WIREFRAME;
00057      <span class="keyword">extern</span> <span class="keywordtype">float</span> Colour[3];
00058 
00059     defineMaterial();
00060 
00061      <span class="keywordflow">if</span> (WIREFRAME == 1) {
00062          glPolygonMode(GL_FRONT, GL_LINE);
00063          glPolygonMode(GL_BACK, GL_LINE);
00064      } <span class="keywordflow">else</span> {
00065          glPolygonMode(GL_FRONT, GL_FILL);
00066          glPolygonMode(GL_BACK, GL_FILL);
00067      }
00068                     
00069     
00070     printf(<span class="stringliteral">"Begin Plot\n"</span>);
00071     <span class="keywordflow">for</span> (it=1; it &lt; ds-&gt;<a class="code" href="structdataset.html#o1">Y</a>; it++) {
00072         glBegin(GL_QUAD_STRIP);
00073         <span class="keywordflow">for</span> (is=0; is &lt; ds-&gt;<a class="code" href="structdataset.html#o0">X</a> ; is++) {
00074             x = ds-&gt;<a class="code" href="structdataset.html#o2">x</a>[(is * ds-&gt;<a class="code" href="structdataset.html#o1">Y</a>) + it];
00075             y = ds-&gt;<a class="code" href="structdataset.html#o3">y</a>[(is * ds-&gt;<a class="code" href="structdataset.html#o1">Y</a>) + it];
00076             z = ds-&gt;<a class="code" href="structdataset.html#o4">z</a>[(is * ds-&gt;<a class="code" href="structdataset.html#o1">Y</a>) + it];
00077                 <span class="comment">/* Check to see if cmd line args passed */</span>
00078                 <span class="keywordflow">if</span> (COLOUR == 1) {
00079                     glColor3f(Colour[0], Colour[1], Colour[2]);
00080                 } <span class="keywordflow">else</span> {
00081                     glColor3f(1.0, 1.0, 1.0);
00082                 }
00083                 <span class="keywordflow">if</span> (USE_GRADIENT_FILL == 1) {
00084                     glColor3f(redMap(z), greenMap(z), blueMap(z));
00085                     printf(<span class="stringliteral">"x = %f, y = %f, z = %f\n"</span>, redMap(z), greenMap(z), blueMap(z));
00086                 }
00087             glVertex3d(x, y, z);
00088 
00089             x = ds-&gt;<a class="code" href="structdataset.html#o2">x</a>[(is * ds-&gt;<a class="code" href="structdataset.html#o1">Y</a>) + it - 1];
00090             y = ds-&gt;<a class="code" href="structdataset.html#o3">y</a>[(is * ds-&gt;<a class="code" href="structdataset.html#o1">Y</a>) + it - 1];
00091             z = ds-&gt;<a class="code" href="structdataset.html#o4">z</a>[(is * ds-&gt;<a class="code" href="structdataset.html#o1">Y</a>) + it - 1];
00092                 <span class="keywordflow">if</span> (USE_GRADIENT_FILL == 1) {
00093                     glColor3f(redMap(z), greenMap(z), blueMap(z));
00094                 }
00095             glVertex3d(x, y, z);
00096 
00097         }
00098         glEnd();
00099     }   
00100     printf(<span class="stringliteral">"End Plot\n"</span>);
00101 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon May 3 15:20:15 2004 for 3dplot by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
